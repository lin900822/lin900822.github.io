[{"content":" 前言 # Linux Kernel中的Process, Thread其實跟我們一般認知的定義有些不太一樣，因此這篇文章來記錄這些名詞上的差異。\n歷史 # 最開始的Linux，並沒有follow POSIX的標準，且當初也沒有針對多執行緒去設計架構，都還是以單執行緒為主，因此最早期設計了task_struct這個資料結構當作Scheduler調度CPU資源的單位，一個task_struct就代表一個Process。\n後來的設計 # 後來多核CPU逐漸成為主流後，多執行緒的設計就很有必要了，但Linux為了方便便延續了之前的設計，將task_struct定義改為Lightweight Process(LWP)，其實就是我們一般認知的Thread的概念，而Process這個名詞則變成了一組LWP的集合，Linux稱之為Thread Group。\ntask_struct # task_struct又被稱作Process descriptor(也就是OS中的PCB)，存放所有跟該LWP有關的資料，其中有兩個重要的欄位：\npid ：這個LWP的Id，所有LWP的Id都是唯一的 tgid：同一組LWP(Thread)形成的Process的Id，如果是main thread則跟pid一致，如果是其他thread則會記錄main thread的pid 以及另外兩個重要的function：\ngetpid()：回傳tgid欄位 gettid()：回傳pid 欄位，也就是說pid其實實際上的意義是Thread Id，但task_struct中並沒有一個專屬的欄位紀錄tid，而是統一用pid ","date":"10 December 2025","externalUrl":null,"permalink":"/posts/linux/linux-kernel-process-and-thread/","section":"Posts","summary":"","title":"【Linux Kernel】Process and Thread的關係","type":"posts"},{"content":"","date":"10 December 2025","externalUrl":null,"permalink":"/posts/","section":"Posts","summary":"","title":"Posts","type":"posts"},{"content":"","date":"10 December 2025","externalUrl":null,"permalink":"/","section":"Wilson Lin's Blog","summary":"","title":"Wilson Lin's Blog","type":"page"},{"content":"","externalUrl":null,"permalink":"/authors/","section":"Authors","summary":"","title":"Authors","type":"authors"},{"content":"","externalUrl":null,"permalink":"/categories/","section":"Categories","summary":"","title":"Categories","type":"categories"},{"content":"","externalUrl":null,"permalink":"/series/","section":"Series","summary":"","title":"Series","type":"series"},{"content":"","externalUrl":null,"permalink":"/tags/","section":"Tags","summary":"","title":"Tags","type":"tags"}]